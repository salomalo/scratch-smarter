jQuery(document).ready(function(e){function a(e){return'<div class="error afnf-error nf-error-msg">'+e+"</div>"}function i(){e(n.registrationFormIDSelector+".nf-form-cont").has(".email-wrap").length?n.hasEmail=!0:n.hasEmail=!1,e(n.registrationFormIDSelector+".nf-form-cont").has(".affwp_afnf_username-wrap").length?n.hasUsername=!0:n.hasUsername=!1,e(n.registrationFormIDSelector+".nf-form-cont input").disabled=!0,e(n.registrationFormIDSelector+".nf-form-cont input[type='button']").disabled=!0,n.hasEmail||n.hasUsername?n.hasEmail?n.loggedIn&&n.hasEmail?(e(n.registrationFormIDSelector+".nf-form-cont .email-container input").val(n.email),document.querySelector(n.registrationFormIDSelector+".nf-form-cont input[type='button']").disabled=!1,n.hasEmail&&(document.querySelector(n.registrationFormIDSelector+".nf-form-cont input[type='email']").disabled=!0),n.hasUsername&&(document.querySelector(n.registrationFormIDSelector+".nf-form-cont .affwp_afnf_username-wrap input").disabled=!0)):n.hasEmail&&(document.querySelector(n.registrationFormIDSelector+".nf-form-cont input").disabled=!1,document.querySelector(n.registrationFormIDSelector+".nf-form-cont input[type='button']").disabled=!1,e(n.registrationFormIDSelector+".nf-form-cont").has(".afnf-error").length&&e(n.registrationFormIDSelector+".nf-form-cont .afnf-error").remove()):(document.querySelector(n.registrationFormIDSelector+".nf-form-cont input").disabled=!0,document.querySelector(n.registrationFormIDSelector+".nf-form-cont input[type='button']").disabled=!0,e(n.registrationFormIDSelector+".nf-form-content").prepend(a(n.missingEmail)),n.debug&&(console.afnf(n.missingEmail),console["debugger"])):(e(n.registrationFormIDSelector+".nf-form-cont input").disabled=!0,e(n.registrationFormIDSelector+".nf-form-cont input[type='button']").disabled=!0,e(n.registrationFormIDSelector+".nf-form-content").prepend(a(n.missingFields)),n.debug&&(console.afnf(n.missingFields),console["debugger"])),n.loggedIn&&(e(n.registrationFormIDSelector+".nf-form-cont .email-container").prop("disabled",!0),e(n.registrationFormIDSelector+".nf-form-cont .affwp_afnf_username-wrap input").prop("disabled",!0),e(n.registrationFormIDSelector+".nf-form-cont .password-container").remove(),e(n.registrationFormIDSelector+".nf-form-cont .passwordconfirm-container").remove(),e(".hello").remove())}var n={input_email:e(".nf-form-content .email-container .email-wrap input"),email_value:e(".nf-form-content .email-container .email-wrap input").val(),input_username:e(".nf-form-content .affwp_afnf_username-container .affwp_afnf_username-wrap input"),loggedIn:affiliatewp_afnf.logged_in,isValidAffiliate:affiliatewp_afnf.is_valid_affiliate,afnfFormID:affiliatewp_afnf.afnf_form_id,isAFNFForm:function(){var e="";return e==n.afnfFormID},emailExists:affiliatewp_afnf.error_email_exists,missingEmail:affiliatewp_afnf.error_missing_email,email:affiliatewp_afnf.user_email,isEmpty:affiliatewp_afnf.error_email_empty,missingFields:affiliatewp_afnf.error_missing_fields,missingUsername:affiliatewp_afnf.error_missing_username,submit:e(".nf-form-cont input[type='button']"),hasEmail:!1,hasUsername:!1,registrationFormIDSelector:"#nf-form-"+affiliatewp_afnf.afnf_form_id+"-cont","debugger":function(e){return e="","Affiliate Forms for Ninja Forms: \n"+e},debug:affiliatewp_afnf.debug};console.afnf=function(){Array.prototype.unshift.call(arguments,n["debugger"]()),console.error.apply(console,arguments)},setTimeout(i,200);var r=Marionette.Object.extend({initialize:function(){var e=Backbone.Radio.channel("submit");this.listenTo(e,"validate:field",this.validateRequired);var a=Backbone.Radio.channel("fields");this.listenTo(a,"change:modelValue",this.validateRequired)},validateRequired:function(a){if("email"==a.get("type"))if(a.get("value"))Backbone.Radio.channel("fields").request("remove:error",a.get("id"),"afnf-error"),e.ajax({url:affiliatewp_afnf.ajax_url,type:"get",data:{action:"affiliatewp_afnf_validate_email",afnf_get_email:a.get("value"),form_id:n.afnfFormID},success:function(e){0!=e&&(n.debug&&console.afnf(e),Backbone.Radio.channel("fields").request("add:error",a.get("id"),"afnf-error",e),"undefined"!=typeof wp.a11y&&wp.a11y.speak(e,"assertive"))}});else{if(Backbone.Radio.channel("fields").request("add:error",a.get("id"),"afnf-error",affiliatewp_afnf.error_email_empty),"undefined"==typeof wp.a11y)return;wp.a11y.speak(affiliatewp_afnf.error_email_empty,"assertive")}}}),t=Marionette.Object.extend({initialize:function(){var e=Backbone.Radio.channel("submit");this.listenTo(e,"validate:field",this.validateRequired);var a=Backbone.Radio.channel("fields");this.listenTo(a,"change:modelValue",this.validateRequired)},validateRequired:function(a){"affwp_afnf_payment_email"==a.get("type")&&a.get("value")&&(Backbone.Radio.channel("fields").request("remove:error",a.get("id"),"afnf-error"),e.ajax({url:affiliatewp_afnf.ajax_url,type:"get",data:{action:"affiliatewp_afnf_validate_payment_email",afnf_get_payment_email:a.get("value"),form_id:n.afnfFormID},success:function(e){0!=e&&(n.debug&&console.afnf(e),Backbone.Radio.channel("fields").request("add:error",a.get("id"),"afnf-error",e),"undefined"!=typeof wp.a11y&&wp.a11y.speak(e,"assertive"))}}))}}),o=Marionette.Object.extend({initialize:function(){if(n.isValidAffiliate&&n.loggedIn)return void e(n.registrationFormIDSelector+".nf-form-cont .affwp_afnf_username-wrap input").attr("disabled",!0);var a=Backbone.Radio.channel("submit");this.listenTo(a,"validate:field",this.validateRequired);var i=Backbone.Radio.channel("fields");this.listenTo(i,"change:modelValue",this.validateRequired)},validateRequired:function(a){if("affwp_afnf_username"==a.get("type"))if(a.get("value"))Backbone.Radio.channel("fields").request("remove:error",a.get("id"),"afnf-error"),e.ajax({url:affiliatewp_afnf.ajax_url,type:"get",data:{action:"affiliatewp_afnf_validate_username",afnf_get_username:a.get("value")},success:function(e){n.isValidAffiliate&&n.loggedIn||0!=e&&(n.debug&&console.afnf(e),Backbone.Radio.channel("fields").request("add:error",a.get("id"),"afnf-error",e),"undefined"!=typeof wp.a11y&&wp.a11y.speak(e,"assertive"))}});else{if(Backbone.Radio.channel("fields").request("add:error",a.get("id"),"afnf-error",affiliatewp_afnf.error_missing_username),"undefined"==typeof wp.a11y)return;wp.a11y.speak(affiliatewp_afnf.error_missing_username,"assertive")}}});new r,new o,new t});