(function(){!function(a,b,c){"use strict";return window.WC_Memberships_Modal_View=a.WCBackboneModal.View.extend({constructor:function(a){var b;return a=a||{},a.target=this.template_id||a.template_id,a.string=a.data,b=Array.prototype.slice.call(arguments,1),b.unshift(a),WC_Memberships_Modal_View.__super__.constructor.apply(this,b)},render:function(){var b,c;return a("#wc-backbone-modal-dialog .modal-close").trigger("click"),b=wp.template(this._target),this.$el.append(b(this._string)),a(document.body).css({overflow:"hidden"}).append(this.$el),this.resizeContent(),this.$(".wc-backbone-modal-content").attr("tabindex","0").focus(),a(document.body).trigger("init_tooltips"),a(document.body).trigger("wc_backbone_modal_loaded",this._target),c=this,a("#btn-close").on("click",function(a){return a.preventDefault(),c.close()}),a("#btn-stop").on("click",function(b){return b.preventDefault(),c.removeJob(a(this).data("job-name"),a(this).data("job-id"),!0)}),a("document, body").on("wc_backbone_modal_before_remove",function(b,d){var e,f,g;if(e=a("#"+d+"-job"),g=e?e.data("name"):null,f=e?e.data("id"):null,g&&f)return c.removeJob(g,f,!1)})},is_blocked:function(){return this.$(".wc-backbone-modal-content").is(".processing")||this.$(".wc-backbone-modal-content").parents(".processing").length},block:function(){if(!this.is_blocked())return this.$(".wc-backbone-modal-content").addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},unblock:function(){return this.$(".wc-backbone-modal-content").removeClass("processing").unblock()},closeButton:function(b){if(b.preventDefault(),!(this._string&&this._string.job&&("completed"!==this._string.job.status||this._string.job.percentage&&100!==parseInt(this._string.job.percentage,10))))return a(document.body).trigger("wc_backbone_modal_before_remove",this._target),this.undelegateEvents(),this.close()},close:function(){return a(document).off("focusin"),a(document.body).css({overflow:"auto"}),this.remove()},removeJob:function(b,c,d){var e;return e={action:"wc_memberships_remove_batch_job",security:wc_memberships_admin.remove_memberships_batch_job_nonce,job_name:b,job_id:c},a.post(wc_memberships_admin.ajax_url,e,function(a){if(window.onbeforeunload=null,a.success&&d)return location.reload()})}})}(jQuery,Backbone,_)}).call(this);